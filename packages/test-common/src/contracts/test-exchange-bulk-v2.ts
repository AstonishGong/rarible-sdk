import type Web3 from "web3"
import type { Address } from "@rarible/ethereum-api-client"
import type { Contract } from "web3-eth-contract"
import type { AbiItem } from "../common/abi-item"

export function createTestExchangeBulkV2Contract(web3: Web3, address?: Address): Contract {
	return new web3.eth.Contract(EXCHANGEV2_BULK_ABI, address)
}

export async function deployTestExchangeBulkV2(web3: Web3) {
	const empty = createTestExchangeBulkV2Contract(web3)
	const [address] = await web3.eth.getAccounts()
	return empty.deploy({ data: exchangeBulkV2Bytecode }).send({ from: address, gas: 5000000, gasPrice: "0" })
}

export const exchangeBulkV2Bytecode =
	"0x608060405234801561001057600080fd5b506112fc806100206000396000f3fe60806040526004361061008a5760003560e01c806383758e981161005957806383758e98146101005780638da5cb5b14610120578063a05f32dc1461014b578063c9f0a2fa14610160578063f2fde38b1461017557610091565b80632ac392ae1461009657806345325874146100b857806367b1f5df146100cb578063715018a6146100eb57610091565b3661009157005b600080fd5b3480156100a257600080fd5b506100b66100b1366004610df3565b610195565b005b6100b66100c6366004610cf7565b610279565b3480156100d757600080fd5b506100b66100e6366004610cd4565b6103d3565b3480156100f757600080fd5b506100b6610457565b34801561010c57600080fd5b506100b661011b366004610cd4565b610503565b34801561012c57600080fd5b50610135610587565b6040516101429190611109565b60405180910390f35b34801561015757600080fd5b50610135610596565b34801561016c57600080fd5b506101356105a5565b34801561018157600080fd5b506100b6610190366004610cd4565b6105b4565b600054610100900460ff16806101ae57506101ae6106b7565b806101bc575060005460ff16155b6101f75760405162461bcd60e51b815260040180806020018281038252602e815260200180611279602e913960400191505060405180910390fd5b600054610100900460ff16158015610222576000805460ff1961ff0019909116610100171660011790555b61022a6106c8565b61023261076a565b606580546001600160a01b038086166001600160a01b03199283161790925560668054928516929091169190911790558015610274576000805461ff00191690555b505050565b60005b81518110156103ac5781818151811061029157fe5b602002602001015160000151151560011515141561034d5760655482516000916001600160a01b0316908490849081106102c757fe5b6020026020010151602001518484815181106102df57fe5b6020026020010151604001516040516102f891906110ed565b60006040518083038185875af1925050503d8060008114610335576040519150601f19603f3d011682016040523d82523d6000602084013e61033a565b606091505b5050905061034781610863565b506103a4565b60008083838151811061035c57fe5b60200260200101516040015180602001905181019061037b9190610e2b565b915091506103a1828286868151811061039057fe5b602002602001015160200151610872565b50505b60010161027c565b504780156103cf576103cf816103c06109e4565b6001600160a01b0316906109e8565b5050565b6103db6109e4565b6001600160a01b03166103ec610587565b6001600160a01b031614610435576040805162461bcd60e51b815260206004820181905260248201526000805160206112a7833981519152604482015290519081900360640190fd5b606680546001600160a01b0319166001600160a01b0392909216919091179055565b61045f6109e4565b6001600160a01b0316610470610587565b6001600160a01b0316146104b9576040805162461bcd60e51b815260206004820181905260248201526000805160206112a7833981519152604482015290519081900360640190fd5b6033546040516000916001600160a01b0316907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0908390a3603380546001600160a01b0319169055565b61050b6109e4565b6001600160a01b031661051c610587565b6001600160a01b031614610565576040805162461bcd60e51b815260206004820181905260248201526000805160206112a7833981519152604482015290519081900360640190fd5b606580546001600160a01b0319166001600160a01b0392909216919091179055565b6033546001600160a01b031690565b6066546001600160a01b031681565b6065546001600160a01b031681565b6105bc6109e4565b6001600160a01b03166105cd610587565b6001600160a01b031614610616576040805162461bcd60e51b815260206004820181905260248201526000805160206112a7833981519152604482015290519081900360640190fd5b6001600160a01b03811661065b5760405162461bcd60e51b81526004018080602001828103825260268152602001806112536026913960400191505060405180910390fd5b6033546040516001600160a01b038084169216907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a3603380546001600160a01b0319166001600160a01b0392909216919091179055565b60006106c230610a80565b15905090565b600054610100900460ff16806106e157506106e16106b7565b806106ef575060005460ff16155b61072a5760405162461bcd60e51b815260040180806020018281038252602e815260200180611279602e913960400191505060405180910390fd5b600054610100900460ff16158015610755576000805460ff1961ff0019909116610100171660011790555b8015610767576000805461ff00191690555b50565b600054610100900460ff168061078357506107836106b7565b80610791575060005460ff16155b6107cc5760405162461bcd60e51b815260040180806020018281038252602e815260200180611279602e913960400191505060405180910390fd5b600054610100900460ff161580156107f7576000805460ff1961ff0019909116610100171660011790555b60006108016109e4565b603380546001600160a01b0319166001600160a01b038316908117909155604051919250906000907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0908290a3508015610767576000805461ff001916905550565b80610767573d6000803e3d6000fd5b61087a610a8a565b30815260608481015160208084019190915285015190820152604080516001808252818301909252600091816020015b6108b2610af5565b8152602001906001900390816108aa5790505090506108cf6109e4565b816000815181106108dc57fe5b6020026020010151600001906001600160a01b031690816001600160a01b0316815250506127108160008151811061091057fe5b6020908102919091018101516bffffffffffffffffffffffff909216910152610937610b0c565b81815260405161094b90829060200161111d565b60408051601f198184030181529181526101008501919091526323d235ef60e01b60e085015260665490516301d3347f60e71b81526060916001600160a01b03169063e99a3f809087906109a9908b908b908a90889060040161116f565b6000604051808303818588803b1580156109c257600080fd5b505af11580156109d6573d6000803e3d6000fd5b505050505050505050505050565b3390565b6040516000906001600160a01b0384169083908381818185875af1925050503d8060008114610a33576040519150601f19603f3d011682016040523d82523d6000602084013e610a38565b606091505b5050905080610274576040805162461bcd60e51b815260206004820152600f60248201526e1d1c985b9cd9995c8819985a5b1959608a1b604482015290519081900360640190fd5b803b15155b919050565b60405180610120016040528060006001600160a01b03168152602001610aae610b2f565b815260006020820152604001610ac2610b2f565b815260200160008152602001600081526020016000815260200160006001600160e01b0319168152602001606081525090565b604080518082019091526000808252602082015290565b604051806060016040528060608152602001606081526020016000151581525090565b6040518060400160405280610b42610b4f565b8152602001600081525090565b60408051808201909152600081526060602082015290565b8051610a858161123d565b80516001600160e01b031981168114610a8557600080fd5b600082601f830112610b9a578081fd5b8135610bad610ba8826111eb565b6111c7565b818152846020838601011115610bc1578283fd5b816020850160208301379081016020019190915292915050565b600082601f830112610beb578081fd5b8151610bf9610ba8826111eb565b818152846020838601011115610c0d578283fd5b610c1e82602083016020870161120d565b949350505050565b60006040808385031215610c38578182fd5b805181810167ffffffffffffffff8282108183111715610c5457fe5b818452829450855181811115610c6957600080fd5b8601808803851315610c7a57600080fd5b608084018381108382111715610c8c57fe5b8552610c9781610b72565b83526020810151945081851115610cad57600080fd5b610cb988868301610bdb565b60608501525050815260209384015193019290925292915050565b600060208284031215610ce5578081fd5b8135610cf08161123d565b9392505050565b60006020808385031215610d09578182fd5b823567ffffffffffffffff80821115610d20578384fd5b818501915085601f830112610d33578384fd5b813581811115610d3f57fe5b610d4c84858302016111c7565b81815284810190848601875b84811015610de45781358701606080601f19838f03011215610d78578a8bfd5b604080518281018181108b82111715610d8d57fe5b8252838c01358015158114610da0578d8efd5b8152838201358c820152918301359189831115610dbb578c8dfd5b610dc98f8d85870101610b8a565b91810191909152865250509287019290870190600101610d58565b50909998505050505050505050565b60008060408385031215610e05578081fd5b8235610e108161123d565b91506020830135610e208161123d565b809150509250929050565b60008060408385031215610e3d578182fd5b825167ffffffffffffffff80821115610e54578384fd5b8185019150610120808388031215610e6a578485fd5b610e73816111c7565b9050610e7e83610b67565b8152602083015182811115610e91578586fd5b610e9d88828601610c26565b602083015250610eaf60408401610b67565b6040820152606083015182811115610ec5578586fd5b610ed188828601610c26565b6060830152506080830151608082015260a083015160a082015260c083015160c0820152610f0160e08401610b72565b60e08201526101008084015183811115610f19578687fd5b610f2589828701610bdb565b828401525050809450506020850151915080821115610f42578283fd5b50610f4f85828601610bdb565b9150509250929050565b6001600160a01b03169052565b6000815180845260208085019450808401835b83811015610fb757815180516001600160a01b031688528301516bffffffffffffffffffffffff168388015260409096019590820190600101610f79565b509495945050505050565b6001600160e01b0319169052565b60008151808452610fe881602086016020860161120d565b601f01601f19169290920160200192915050565b600081516040845263ffffffff60e01b8151166040850152602081015190506040606085015261102f6080850182610fd0565b602093840151949093019390935250919050565b6000610120611053848451610f59565b602083015181602086015261106a82860182610ffc565b915050604083015161107f6040860182610f59565b50606083015184820360608601526110978282610ffc565b9150506080830151608085015260a083015160a085015260c083015160c085015260e08301516110ca60e0860182610fc2565b5061010080840151858303828701526110e38382610fd0565b9695505050505050565b600082516110ff81846020870161120d565b9190910192915050565b6001600160a01b0391909116815260200190565b6000602082528251606060208401526111396080840182610f66565b90506020840151601f198483030160408501526111568282610f66565b9150506040840151151560608401528091505092915050565b6000608082526111826080830187611043565b82810360208401526111948187610fd0565b905082810360408401526111a88186611043565b905082810360608401526111bc8185610fd0565b979650505050505050565b60405181810167ffffffffffffffff811182821017156111e357fe5b604052919050565b600067ffffffffffffffff8211156111ff57fe5b50601f01601f191660200190565b60005b83811015611228578181015183820152602001611210565b83811115611237576000848401525b50505050565b6001600160a01b038116811461076757600080fdfe4f776e61626c653a206e6577206f776e657220697320746865207a65726f2061646472657373496e697469616c697a61626c653a20636f6e747261637420697320616c726561647920696e697469616c697a65644f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572a264697066735822122068cdcb30d1917e03f2b37326540518fcbe93a36ce83cebc25116dc74c410fcfb64736f6c63430007060033"

export const EXCHANGEV2_BULK_ABI: AbiItem[] = [
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "previousOwner",
				"type": "address",
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "newOwner",
				"type": "address",
			},
		],
		"name": "OwnershipTransferred",
		"type": "event",
	},
	{
		"inputs": [],
		"name": "exchangeV2",
		"outputs": [
			{
				"internalType": "contract IExchangeV2",
				"name": "",
				"type": "address",
			},
		],
		"stateMutability": "view",
		"type": "function",
	},
	{
		"inputs": [],
		"name": "owner",
		"outputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address",
			},
		],
		"stateMutability": "view",
		"type": "function",
	},
	{
		"inputs": [],
		"name": "renounceOwnership",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function",
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "newOwner",
				"type": "address",
			},
		],
		"name": "transferOwnership",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function",
	},
	{
		"inputs": [],
		"name": "wyvernExchange",
		"outputs": [
			{
				"internalType": "contract IWyvernExchange",
				"name": "",
				"type": "address",
			},
		],
		"stateMutability": "view",
		"type": "function",
	},
	{
		"inputs": [
			{
				"internalType": "contract IWyvernExchange",
				"name": "_wyvernExchange",
				"type": "address",
			},
			{
				"internalType": "contract IExchangeV2",
				"name": "_exchangeV2",
				"type": "address",
			},
		],
		"name": "__ExchangeBulkV2_init",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function",
	},
	{
		"inputs": [
			{
				"components": [
					{
						"internalType": "bool",
						"name": "marketWyvern",
						"type": "bool",
					},
					{
						"internalType": "uint256",
						"name": "amount",
						"type": "uint256",
					},
					{
						"internalType": "bytes",
						"name": "tradeData",
						"type": "bytes",
					},
				],
				"internalType": "struct ExchangeBulkV2.TradeDetails[]",
				"name": "tradeDetails",
				"type": "tuple[]",
			},
		],
		"name": "bulkTransfer",
		"outputs": [],
		"stateMutability": "payable",
		"type": "function",
	},
	{
		"inputs": [
			{
				"internalType": "contract IWyvernExchange",
				"name": "_wyvernExchange",
				"type": "address",
			},
		],
		"name": "setWyvern",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function",
	},
	{
		"inputs": [
			{
				"internalType": "contract IExchangeV2",
				"name": "_exchangeV2",
				"type": "address",
			},
		],
		"name": "setExchange",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function",
	},
]
